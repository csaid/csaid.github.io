<!DOCTYPE html>
<html lang="en-us">

<!--
It's bad to import d3 in every post separatly (https://groups.google.com/forum/#!topic/d3-js/bwdNirt2uEU).
Importing it globally here.
Putting this up at the top, according to this controversial stack overflow answer
http://stackoverflow.com/questions/7169370/d3-js-and-document-onready
 -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<link rel="stylesheet" href="/public/font-awesome-4.4.0/css/font-awesome.min.css">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
    <meta name="description" content="An animated look at local maxima, novelty effects, differentiation, emergent maxima.">
  

  <!-- To get a link preview image, just set the image attribute in your _post -->
  

  <!-- twitter standard -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@chris_said" />
  <meta name="twitter:title" content="Four pitfalls of hill climbing" />
  <meta name="twitter:description" content="An animated look at local maxima, novelty effects, differentiation, emergent maxima." />


  <title>
    
      Four pitfalls of hill climbing &middot; The File Drawer
    
  </title>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67746868-1', 'auto');
    ga('send', 'pageview');
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<!--   <body class="theme-base-cps">
 -->
  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          The File Drawer
        </a>
      </h1>
      <p class="lead">My name is Chris Said and I am a data scientist at Opendoor. This blog is mostly about tech, stats, and science.</p>

    </div>

    <nav class="sidebar-nav">

      
        <a class="sidebar-nav-item" href="/">Home</a>
      
        <a class="sidebar-nav-item" href="/archive">Archive</a>
      
        <a class="sidebar-nav-item" href="/atom.xml">Feed</a>
      

    </nav>

    <div class="wrapper">
      <div class="inner">
        <a href = "http://www.twitter.com/Chris_Said" class="contact-button"><i class="fa fa-twitter fa-2x"></i></a>
        <a href = "https://www.linkedin.com/pub/chris-said/6b/86b/979" class="contact-button"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href = "mailto:chris.said@gmail.com" class="contact-button"><i class="fa fa-envelope fa-2x"></i></a>
      </div>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Four pitfalls of hill climbing</h1>
  <span class="post-date">28 Feb 2016</span>
  <meta charset="utf-8" />

<p>One of the great developments in product design has been the adoption of A/B testing. Instead of just guessing what is best for your customers, you can offer a product variant to a subset of customers and measure how well it works. While undeniably useful, A/B testing is sometimes said to encourage too much “hill climbing”, an incremental and short-sighted style of product development that emphasizes easy and immediate wins.</p>

<p>Discussion around hill climbing can sometimes get a bit vague, so I thought I would make some animations that describe four distinct pitfalls that can emerge from an overreliance on hill climbing.</p>

<h4 id="1-local-maxima">1. Local maxima</h4>

<p>If you climb hills incrementally, you may end up in a local maximum and miss out on an opportunity to land on a global maximum with much bigger reward. Concerns about local maxima are often wrapped up in critiques of <em>incrementalism</em>.</p>

<div class="wrapper">
  <div class="inner" id="plot1"></div>
</div>

<p>Local maxima and global maxima can be illustrated with hill diagrams like the one above. The horizontal axis represents product space collapsed into a single dimension. In reality, of course, there are many dimensions that a product could explore.</p>

<h4 id="2-emergent-maxima">2. Emergent maxima</h4>

<p>If you run short A/B tests, or A/B tests that do not fully capture network effects, you might not realize that a change that initially seems bad may be good in the long run. This idea, which is distinct from concerns about incrementalism, can be described with a dynamic reward function animation. As before, the horizontal axis is product space. Each video frame represents a time step, and the vertical axis represents immediate, measurable reward.</p>

<div class="wrapper">
  <div class="inner" id="plot2"></div>
</div>

<p>When a product changes, the intial effect is negative. But eventually, customers begin to enjoy the new version, as shown by changes in the reward function. By waiting at a position that initially seemed negative, you are able to discover an emergent mountain, and receive greater reward than you would have from short-term optimization.</p>

<h4 id="3-novelty-effects">3. Novelty effects</h4>

<p>Short-term optimization can be bad, not only because it prevents discovery of emergent mountains, but also because some hills can be transient. One way a hill can disappear is through <em>novelty effects</em>, where a shiny new feature can be engaging to customers in the short term, but uninteresting or even negative in the long term.</p>

<div class="wrapper">
  <div class="inner" id="plot3"></div>
</div>

<h4 id="4-loss-of-differentiation">4. Loss of differentiation</h4>

<p>Another way a hill can disappear is through loss of differentiation from more dominant competitors. Your product may occupy a market niche. If you try to copy your competitor, you may initially see some benefits. But at some point, your customers may leave because not much separates you from your more dominant competitor. Differentiation matters in some dimensions more than others.</p>

<div class="wrapper">
  <span id="plot4"></span>
  <span id="plot5"></span>
</div>

<p>You can think of an industry as a dynamic ecosystem where each company has its own reward function. When one company moves, it changes its own reward function as well as the reward functions of other companies. If this sounds like biology, you’re not mistaken. The dynamics here are similar to evolutionary <a href="http://www.randalolson.com/2014/04/17/visualizing-evolution-in-action-dynamic-fitness-landscapes/">fitness landscapes</a>.</p>

<hr />

<p>While all of the criticisms of hill climbing have obvious validity, I think it is easy for people to overreact to them. Here are some caveats in defense of hill climbing:</p>

<ul>
  <li>The plots above probably exaggerate the magnitude and frequency with which reward functions change.</li>
  <li>There is huge uncertainty and disagreement about what future landscapes will look like. In most cases, it’s better to explore regions that increase (rather than decrease) reward, making sure to run long term experiments when needed.</li>
  <li>The space is high dimensional. Even if your product is at a local maximum in one dimension, there are many other dimensions to explore and measure.</li>
  <li>We may overestimate the causal relationship between bold product moves and company success. Investors often observe that companies who don’t make bold changes are doomed to fail. While I don’t doubt that there is some causation here, I think there is also some reverse causation. Bold changes require lots of resources. Maybe it’s mostly the success-bound companies who have enough resources to afford the bold changes.</li>
</ul>

<p>Special thanks to Marika Inhoff, <a href="https://twitter.com/johnvmcdonnell">John McDonnell</a> and <a href="https://twitter.com/alexrosner">Alex Rosner</a> for comments on a draft of this post.</p>
<style>

circle {
  stroke: #fff;
  stroke-width: 1.5px;
}

circle.you {
  fill: #ED2685;
}

circle.competitor {
  fill: #3AC3F2;
}

.background {
  fill: #e7e7e7;
}

.axis .tick:nth-child(2n) {
  stroke-opacity: 0.5;
}

.axis text {
  font: 12px sans-serif;
}

.line path {
  fill: none;
  stroke: #000;
  stroke-width: 2px;
  stroke-linecap: round;
  stroke-linejoin: round;
}

}

</style>

<!-- I think Markdown doesn't like two script tags in a row -->
<div></div>

<script>





function makeObjectiveGraph(id, get_dot_x, objective, title, is_dynamic, company) {

  // Dot radius
  var r = 11;

  var margin = {top: 20, right: 20, bottom: 20, left: 20},
      width = 270 - margin.left - margin.right,
      height = 270 - margin.top - margin.bottom;

  var tickFormat = d3.format(".1f");

  var y = d3.scale.linear()
      .domain([0, 1])
      .range([height, 0]);

  var yAxisPitfalls = d3.svg.axis()
      .scale(y)
      .orient("left")

  var x = d3.scale.linear()
      .domain([0, 1])
      .range([0, width]);

  var xAxisPitfalls = d3.svg.axis()
      .scale(x)
      .orient("bottom")

  var path = d3.svg.line();

  var svg = d3.select("#" + id).append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  svg.append("rect")
      .attr("class", "background")
      .attr("width", width)
      .attr("height", height);

  var line = svg.append("g")
      .attr("class", "line")
    .append("path");

  var dot = svg.append("circle")
      .attr("r", r-1)
      .attr("class", company);

  // For X- and Y- labels.
  if (company == "competitor"){
    var prefix = "Competitor ";
  } else {
    var prefix = "";
  }

  // Title
  svg.append("text")
      .attr("class", "x label")
      .attr("text-anchor", "middle")
      .attr("x", width/2)
      .attr("y", -8)
      .style("font-size", "14px")
      .style("font-weight", "bold")
      .text(title);

  // X-Label
  svg.append("text")
      .attr("class", "x label")
      .attr("text-anchor", "middle")
      .attr("x", width/2)
      .attr("y", height + 14)
      .style("font-size", "12px")
      .text(prefix + "Product Space");

  // Y-Label
  svg.append("text")
      .attr("class", "y label")
      .attr("text-anchor", "middle")
      .attr("x", -width/2)
      .attr("y", -14)
      .attr("dy", ".75em")
      .attr("transform", "rotate(-90)")
      .style("font-size", "12px")
      .text(prefix + "Reward");


  if (!is_dynamic){
    line.attr("d", path(d3.range(0, 1, .002).concat(1).map(function(xo) {
      return [x(xo), y(objective(xo))];
    })));
  }


  // Provide pixel coordinates of small segment of curve.
  // Returns pixel coordinates just above segment.
  function get_adjusted_dot_coords(start_x, start_y, end_x, end_y) {
    var center_x = (start_x + end_x) / 2;
    var center_y = (start_y + end_y) / 2;
    var rise = (end_y - start_y);
    var run = (end_x - start_x);
    var k = Math.sqrt(Math.pow(r, 2)/(Math.pow(run, 2) + Math.pow(rise, 2)));
    var dx = k * rise;
    var dy = k * run;

    return [center_x + dx, center_y - dy]

  };

  // Functions x and y return pixel units.
  // Var xo is in graph coordinates from 0 to 1.
  // Var t is from 0 to 1.
  d3.timer(function(elapsed) {
    var t = (elapsed % 3000) / 3000; // will range from 0 to 1.
    var dot_xo = get_dot_x(t) // make this a function

    if (is_dynamic) {

      dot_coords = get_adjusted_dot_coords(
                                           x(dot_xo-.001),
                                           y(objective(t, dot_xo-.001)),
                                           x(dot_xo+.001),
                                           y(objective(t, dot_xo+.001))
                                           );

      // dot_coords = [x(dot_xo), y(objective(t, dot_xo))]

      dot.attr("cx", dot_coords[0]).attr("cy", dot_coords[1]);

      // dot.attr("cx", x(t)).attr("cy", y(objective(t, t))-12); // The 12 is in pixel world. Subtracting because pixel 0 is at top.

      line.attr("d", path(d3.range(0, 1, .002).concat(1).map(function(xo) {
        return [x(xo), y(objective(t, xo))];
      })));
    } else {

      dot_coords = get_adjusted_dot_coords(x(dot_xo-.001), y(objective(dot_xo-.001)), x(dot_xo+.001), y(objective(dot_xo+.001)))
      dot.attr("cx", dot_coords[0]).attr("cy", dot_coords[1]);
    }


  });

  d3.select(self.frameElement).style("height", height + margin.top + margin.bottom + "px");
}

var left_pos  = 0.20;
var mid_pos   = 0.50;
var right_pos = 0.80;
var mu = 0.25


// Provides soft trajectory, given starting and stopping times and locations.
// Generally the first agrument will be time t, but using x
// internally here so I can think about the functions visually.
var soft_motion = function(x, start_x, start_y, end_x, end_y) {
  var period = 2 * (end_x - start_x);
  var scale = (end_y - start_y)/2;
  var intercept = start_y + scale;

  if (x < start_x) { return start_y } else
  if (x < end_x) { return -scale * Math.cos(2*Math.PI/period * (x-start_x)) + intercept} else
  return end_y
};

// The horizontal position of your dot
var get_dot_x = function(t) {
  return soft_motion(t, .2, .2, .8, .8)
};

var get_dot_x_local_max = function(t) {
  return soft_motion(t, .2, .35, .8, .2)
};

// The horizontal position of your competitor's dot
var get_competitor_dot_x = function(t) {
  return 0.8;
};

// Gaussian function. For dynamics, call repeatedly with different scale values.
function gauss(x, scale, mu, sig) {
  var coef = scale / (sig* Math.sqrt(2 * Math.PI));
  var numer = Math.pow((x-mu), 2)
  var denom = 2*Math.pow(sig, 2)
  return coef * Math.exp(-numer/denom);
};


var objective1 = function(x){
  var left_scale = 0.2;
  var right_scale = 0.3;
  var sd = 0.2
  return gauss(x, left_scale, left_pos, sd) + gauss(x, right_scale, right_pos, sd)
}

makeObjectiveGraph("plot1", get_dot_x_local_max, objective1, "", false, "you")


var objective2 = function(t, x){
  var left_scale  = soft_motion(t, 0.6, 0.2, 0.95, 0.10);
  var right_scale = soft_motion(t, 0.6, 0.0, 0.95, 0.3);
  var sd = 0.2

  return gauss(x, left_scale, left_pos, sd) + gauss(x, right_scale, right_pos, sd)
};

makeObjectiveGraph("plot2", get_dot_x, objective2, "", true, "you")


var objective3 = function(t, x){
  var left_scale  = soft_motion(t, 0.6, 0.15, 0.95, 0.15);
  var right_scale = soft_motion(t, 0.6, 0.30, 0.95, 0.15);

  return gauss(x, left_scale, left_pos, .25) + gauss(x, right_scale, right_pos, .3)
};

makeObjectiveGraph("plot3", get_dot_x, objective3, "", true, "you")

var objective4 = function(t, x){
  var left_scale  = soft_motion(t, 0.6, 0.15, 0.95, 0.15);
  var right_scale = soft_motion(t, 0.6, 0.30, 0.95, 0.15);

  return gauss(x, left_scale, left_pos, .25) + gauss(x, right_scale, right_pos, .3)
};

makeObjectiveGraph("plot4", get_dot_x, objective4, "Losing differentiation", true, "you")

// Competitor
var objective5 = function(t, x){
  var left_scale  = soft_motion(t, 0.6, 0.05, 0.95, 0.07);
  var right_scale = soft_motion(t, 0.6, 0.4,  0.95, 0.50);

  return gauss(x, left_scale, left_pos, .15) + gauss(x, right_scale, right_pos, .3)
};

makeObjectiveGraph("plot5", get_competitor_dot_x, objective5, "Dominant competitor wins", true, "competitor")


</script>


  <div>
    <a class="twitter-share-button"
      href="https://twitter.com/share"
      data-url=""
      data-via="Chris_Said"
      data-size="large"
      data-count="none">
    Tweet
    </a>
</div>

  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'csaid81';
    var disqus_identifier = 'http://localhost:4000/2016/02/28/four-pitfalls-of-hill-climbing/';
    var disqus_url = 'http://localhost:4000/2016/02/28/four-pitfalls-of-hill-climbing/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/07/09/part-2-a-bipartisan-list-of-people-who-are-good-for-america/">
            Part 2&#58; A bipartisan list of people who argue in good faith
            <small>09 Jul 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/07/09/part-1-a-bipartisan-list-of-people-who-are-bad-for-america/">
            Part 1&#58; A bipartisan list of people who are bad for America
            <small>09 Jul 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/06/19/three-questions-for-social-scientists/">
            Three questions for social scientists&#58; Internet virtue edition
            <small>19 Jun 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


    </div>

  </body>
</html>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">


MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>


<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>
