<!DOCTYPE html>
<html lang="en-us">

<link rel="stylesheet" href="/public/font-awesome-4.4.0/css/font-awesome.min.css">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      The File Drawer &middot; A blog by Chris Said
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<!--   <body class="theme-base-cps">
 -->
  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          The File Drawer
        </a>
      </h1>
      <p class="lead">My name is Chris Said and I am a data scientist at Twitter. This blog is mostly about tech, stats, and science.</p>

    </div>

    <nav class="sidebar-nav">

      
        <a class="sidebar-nav-item active" href="/">Home</a>
      
        <a class="sidebar-nav-item" href="/archive">Archive</a>
      
        <a class="sidebar-nav-item" href="/atom.xml">Feed</a>
      

    </nav>

    <div class="wrapper">
      <div class="inner">
        <a href = "http://www.twitter.com/Chris_Said" class="contact-button"><i class="fa fa-twitter fa-2x"></i></a>
        <a href = "https://www.linkedin.com/pub/chris-said/6b/86b/979" class="contact-button"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href = "mailto:chris.said@gmail.com" class="contact-button"><i class="fa fa-envelope fa-2x"></i></a>
      </div>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/">
        How to make polished Jupyter presentations with optional code visibility
      </a>
    </h1>

    <span class="post-date">13 Feb 2016</span>

    <p>One of the great things about Jupyter notebooks is that they allow you to present reports with figures and code in a single file, making it easier for others to reproduce your results. Sometimes though, you may want to present a cleaner looking report to an audience who may not care about the code. This post shows how to make code visibility optional, and how to remove various Jupyter elements to get a cleaner presentation.</p>

<p>On the left is a typical Jupyter presentation with code and some extra elements. On the right is a more polished version that removes some of the extra elements and makes code visibility optional with a button.</p>

<style>
    div.image_container {
        position: relative;
        width: 510px;
        height: 420px;
    }

    div.in_container {
        position: absolute;
    }
</style>

<div class="image_container">
    <div class="in_container" style="position:absolute top:0px; left:0px">
      <a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_original.ipynb" target="_blank">
        <img src="assets/fig_unpolished_small.png" border="2" />
      </a>
    </div>
    <div class="in_container" style="position:absolute top:0px; left:260px">
      <a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_polished.ipynb" target="_blank">
        <img src="assets/fig_polished_small.png" border="2" />
      </a>
    </div>
</div>

<p>To make the code optionally visible, available at the click of a button, include a raw cell at the beginning of your notebook containing the JavaScript and HTML below. This code sample is inspired by <a href="http://stackoverflow.com/questions/27934885/how-to-hide-code-from-cells-in-ipython-notebook-visualized-with-nbviewer">this Stack Overflow post</a>, but makes a few improvements such as using a raw cell so that the button position stays fixed, changing the button text depending on state, and displaying gradual transitions so the user understands what is happening.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
  <span class="kd">function</span> <span class="nx">code_toggle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">code_shown</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.input&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">(</span><span class="s1">&#39;500&#39;</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toggleButton&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;Show Code&#39;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.input&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;500&#39;</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toggleButton&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;Hide Code&#39;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">code_shown</span> <span class="o">=</span> <span class="o">!</span><span class="nx">code_shown</span>
  <span class="p">}</span>

  <span class="nx">$</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">code_shown</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.input&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;javascript:code_toggle()&quot;</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">id=</span><span class="s">&quot;toggleButton&quot;</span> <span class="na">value=</span><span class="s">&quot;Show Code&quot;</span><span class="nt">&gt;&lt;/form&gt;</span></code></pre></div>

<p>To remove the extra elements, include a raw cell at the end of your notebook with some more JavaScript:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.prompt&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.back-to-top&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;nav#menubar&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.breadcrumb&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

<p>One shortcoming with what we have so far is that users may still see some code or other unwanted elements while the page is loading. This can be an especially big problem if you have a long presentation with many plots. To avoid this, add a raw cell at the very top of you notebook containing a preloader. This example pre-loader includes an animation that signals to users that the page is still loading. It heavily inspired by <a href="http://codepen.io/mimoYmima/pen/fisgL">this preloader</a> created by <a href="https://twitter.com/@mimoYmima">@mimoYmima</a>.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
  <span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#preloader&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="s1">&#39;slow&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">remove</span><span class="p">();});</span>
  <span class="p">});</span>

  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">div</span><span class="nf">#preloader</span> <span class="p">{</span> <span class="k">position</span><span class="o">:</span> <span class="k">fixed</span><span class="p">;</span>
      <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
      <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
      <span class="k">z-index</span><span class="o">:</span> <span class="m">999</span><span class="p">;</span>
      <span class="k">width</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
      <span class="k">height</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
      <span class="k">overflow</span><span class="o">:</span> <span class="k">visible</span><span class="p">;</span>
      <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span> <span class="sx">url(&#39;http://preloaders.net/preloaders/720/Moving%20line.gif&#39;)</span> <span class="k">no-repeat</span> <span class="k">center</span> <span class="k">center</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nt">div</span><span class="nf">#preloader_text</span> <span class="p">{</span>
      <span class="k">font-size</span><span class="o">:</span> <span class="m">250%</span><span class="p">;</span>
      <span class="k">color</span><span class="o">:</span> <span class="nb">gray</span><span class="p">;</span>
      <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
      <span class="k">line-height</span><span class="o">:</span> <span class="m">250px</span><span class="p">;</span>
   <span class="p">}</span>

<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;preloader&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;preloader_text&quot;</span><span class="nt">&gt;</span>
    Please allow a few seconds for page to load...
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<meta charset="utf-8" />

<p>To work with these notebooks, you can clone my <a href="https://github.com/csaid/polished_notebooks">GitHub repository</a>. While the notebooks render correctly on nbviewer (<a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_original.ipynb">unpolished</a>, <a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_polished.ipynb">polished</a>), they do not render correctly on the GitHub viewer.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/"
              data-via="Chris_Said"
              data-count="none"
              data-text="How to make polished Jupyter presentations with optional code visibility">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/17/presidential-debates/">
        The debate CNN wanted and the debate the candidates wanted
      </a>
    </h1>

    <span class="post-date">17 Sep 2015</span>

    <p>In last night’s Republican presidential debate, the CNN moderators tried very hard to pit individual candidates against each other. Pretty much every question was along the lines of: “Candidate A, what do you think about Candidate B’s attacks on you?”</p>

<p>While CNN wanted to generate controversy, the disputes it tried to initiate were not necessarily the disputes that the candidates strategically wanted to have. To get a better sense for this, I tallied up two things:</p>

<ol>
  <li><strong>Moderator Prompts</strong>. These were episodes where the moderators prompted one candidate to challenge another.</li>
  <li><strong>Real Challenges</strong>. These were episodes where either (a) the candidate took the bait from a Moderator Prompt and attacked the other candidate or (b) a candidate launched an unprompted attack on another candidate. I did not include episodes where a prompted candidate acknowledged a disagreement with another candidate in a nonconfrontational way.</li>
</ol>

<p>The results are below. In the first graph, an arrow from one candidate to another indicates that the moderator asked the first candidate to challenge the second. The next graph shows real challenges. In both graphs, the boldness of the curve indicates how many times the event occurred.</p>

<meta charset="utf-8" />

<div class="center">
  <span id="debate_graph1"></span>
  <span id="debate_graph2"></span>
</div>

<p>Some observations:</p>

<ul>
  <li>The graph of Moderator Prompts is much denser than the graph of Real Challenges. As was clear to anyone watching the debate, the moderators wanted to generate more controversy than the candidates wanted.</li>
  <li>Most of the real action in the second graph was in the Trump-Bush-Paul Triangle of Controversy.</li>
  <li>The moderators tried to prompt several challenges to Ben Carson but nobody took the bait. Conversely, the moderators paid relatively little attention to Rand Paul, and yet he was part of several real disputes.</li>
  <li>The interests of Donald Trump were pretty well aligned with the interests of CNN. Donald Trump was prompted many times and engaged in many challenges.</li>
</ul>

<p>It’s also interesting to look at how many times each of the candidates challenged Hillary Clinton, who was not on the stage. Jeb Bush mentioned her on five separate occassions, whereas Donald Trump never mentioned her at all. It’s just a few data points, but it’s consistent with Jeb’s larger focus on the general election.</p>

<figure class="image"><img src="/assets/hillary.png" alt="" /></figure>

<p>I doubt any of this data is very predicitive of election outcomes, but it definitely seems to be related to current polling trends. Either way, it’s pretty interesting to look at. I might make these plots for some of the other debates to see how these relationships change over time.</p>

<p><strong>Update:</strong> Coincidentally, the New York Times just released a <a href="http://www.nytimes.com/interactive/2015/09/17/us/politics/gop-debate-trump-attacks-speaking-time.html">similar analysis with similar graphics</a>. Also, special thanks to <a href="http://www.twitter.com/trebor">@trebor</a> for helping me set up mouseover-triggered transparency.</p>

<style>

.debate_link {
  fill: none;
  stroke: #3AC3F2;
}

.debate_tooltip {
    border-radius: 5px;
    background: #ccc;
    border-color: #555;
    padding: 5px;
    font-size: 10px;
    /*width: 200px;*/
    /*height: 150px;*/
}

.debate_link.resolved {
  stroke-dasharray: 0,2 1;
}

circle {
  fill: #ED2685;
  stroke: #fff;
  stroke-width: 1.5px;
}

path.unselected {
  opacity: 0.1;
}

circle.unselected {
  fill: #ED86C5;
}


text {
  font: 10px sans-serif;
  pointer-events: none;
  text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;
}

</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

<!-- <script type='text/javascript' src='/javascripts/jquery-2.1.4.min.js'></script>
<script type='text/javascript' src='/javascripts/jquery.tipsy.js'></script> -->
<!-- <link rel="stylesheet" href="/stylesheets/tipsy.css" type="text/css" /> -->
<script>

var mod_links = [
   {source: 0, target: 1, mentions: 3},
   {source: 0, target: 2, mentions: 1},
   {source: 0, target: 3, mentions: 1},
   {source: 0, target: 5, mentions: 1},
   {source: 0, target: 7, mentions: 1},
   {source: 1, target: 0, mentions: 3},
   {source: 1, target: 6, mentions: 2},
   {source: 1, target: 8, mentions: 2},
   {source: 1, target: 10, mentions: 2},
   {source: 2, target: 4, mentions: 1},
   {source: 2, target: 10, mentions: 1},
   {source: 3, target: 0, mentions: 2},
   {source: 3, target: 1, mentions: 1},
   {source: 4, target: 1, mentions: 3},
   {source: 4, target: 2, mentions: 1},
   {source: 4, target: 5, mentions: 1},
   {source: 5, target: 0, mentions: 1},
   {source: 5, target: 4, mentions: 1},
   {source: 5, target: 9, mentions: 1},
   {source: 6, target: 1, mentions: 1},
   {source: 7, target: 2, mentions: 1},
   {source: 8, target: 1, mentions: 1},
   {source: 8, target: 4, mentions: 2},
   {source: 8, target: 6, mentions: 1},
   {source: 9, target: 1, mentions: 1},
   {source: 9, target: 5, mentions: 3},
   {source: 9, target: 10, mentions: 1},
   {source: 10,target: 1, mentions: 4},
];

var mod_nodes = [
{idx: 0, name: 'Bush', fixed: true, x: 235.0, y: 135.0},
{idx: 1, name: 'Trump', fixed: true, x: 219.125353283, y: 189.064081746},
{idx: 2, name: 'Walker', fixed: true, x: 176.5415013, y: 225.963199535},
{idx: 3, name: 'Huckabee', fixed: true, x: 120.768516173, y: 233.982144188},
{idx: 4, name: 'Carson', fixed: true, x: 69.5139266055, y: 210.574957435},
{idx: 5, name: 'Cruz', fixed: true, x: 39.0507026386, y: 163.173255684},
{idx: 6, name: 'Rubio', fixed: true, x: 39.0507026386, y: 106.826744316},
{idx: 7, name: 'Paul', fixed: true, x: 69.5139266055, y: 59.4250425646},
{idx: 8, name: 'Christie', fixed: true, x: 120.768516173, y: 36.0178558119},
{idx: 9, name: 'Kasich', fixed: true, x: 176.5415013, y: 44.0368004645},
{idx: 10, name: 'Fiorina', fixed: true, x: 219.125353283, y: 80.9359182544},
]



var challenge_links = [
   {source: 0, target: 1, mentions: 4},
   {source: 0, target: 5, mentions: 1},
   {source: 1, target: 0, mentions: 4},
   {source: 1, target: 2, mentions: 1},
   {source: 1, target: 6, mentions: 1},
   {source: 1, target: 7, mentions: 3},
   {source: 1, target: 10, mentions: 1},
   {source: 2, target: 1, mentions: 1},
   {source: 7, target: 0, mentions: 3},
   {source: 7, target: 1, mentions: 1},
   {source: 7, target: 8, mentions: 1},
   {source: 8, target: 7, mentions: 1},
   {source: 8, target: 10, mentions: 1},
   {source: 10,target: 1, mentions: 2},
   {source: 10,target: 8, mentions: 1},
];





var challenge_nodes = [
{idx: 0, name: 'Bush', fixed: true, x: 235.0, y: 135.0},
{idx: 1, name: 'Trump', fixed: true, x: 219.125353283, y: 189.064081746},
{idx: 2, name: 'Walker', fixed: true, x: 176.5415013, y: 225.963199535},
{idx: 3, name: 'Huckabee', fixed: true, x: 120.768516173, y: 233.982144188},
{idx: 4, name: 'Carson', fixed: true, x: 69.5139266055, y: 210.574957435},
{idx: 5, name: 'Cruz', fixed: true, x: 39.0507026386, y: 163.173255684},
{idx: 6, name: 'Rubio', fixed: true, x: 39.0507026386, y: 106.826744316},
{idx: 7, name: 'Paul', fixed: true, x: 69.5139266055, y: 59.4250425646},
{idx: 8, name: 'Christie', fixed: true, x: 120.768516173, y: 36.0178558119},
{idx: 9, name: 'Kasich', fixed: true, x: 176.5415013, y: 44.0368004645},
{idx: 10, name: 'Fiorina', fixed: true, x: 219.125353283, y: 80.9359182544},
]



function makeGraph(links, nodes, id, interactionType) {

  // Use elliptical arc path segments to doubly-encode directionality.
  function tick() {
    path.attr("d", linkArc);
    circle.attr("transform", transform);
    text.attr("transform", transform);
  }

  function linkArc(d) {
    var dx = d.target.x - d.source.x,
        dy = d.target.y - d.source.y,
        dr = Math.sqrt(dx * dx + dy * dy);
    return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
  }

  function transform(d) {
    return "translate(" + d.x + "," + d.y + ")";
  }

  // Mark each node with chart id
  nodes.forEach(function(d) {d.id=id});

  // Compute the distinct nodes from the links.
  links.forEach(function(link) {
    link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
    link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
  });

  var width = 270,
      height = 280;

  var force = d3.layout.force()
      .nodes(d3.values(nodes))
      .links(links)
      .size([width, height])
      .on("tick", tick)
      .start();

  var svg = d3.select("span#" + id).append("svg")
      .attr("width", width)
      .attr("height", height);
      // .attr("class", "center");

  // Per-type markers, as they don't inherit styles.
  svg.append("defs")
      .append("marker")
      .attr("id", "marker")
      .attr("viewBox", "0 -5 10 10") // min-x, min-y, width, height
      .attr("refX", 17) // The reference point. Even though arrow is length 10, using 12 because otherwise would go to center of circle.
      .attr("refY", 0)
      .attr("markerWidth", 10)
      .attr("markerHeight", 10)
      .attr("markerUnits", "userSpaceOnUse") // makes marker size independent of stroke-width
      .attr("orient", "auto")
      .attr("fill", "#3AC3F2")
    .append("path")
      .attr("d", "M0,-5L10,0L0,5"); // Arrow definition. Start at 0,-5. Then draw line to 10, 0. Then draw line to 0, 5

  // http://stackoverflow.com/questions/10805184/d3-show-data-on-mouseover-of-circle
  // http://bl.ocks.org/biovisualize/1016860
  var tooltip = d3.select("span#" + id)
      .append("div")
      .attr("class", "debate_tooltip")
      .style("position", "absolute")
      .style("z-index", "10")
      .style("visibility", "hidden")
  ;


  var path = svg.append("g").selectAll("path")
      .data(force.links())
    .enter().append("path")
      .attr("class", "debate_link")
      .attr("stroke-width", function(d) { return d.mentions })
      .attr("marker-end", "url(#marker)") // This just say that the arrow should go at the end of the link, rather than the beginning.
      .on("mouseover", function(d){return tooltip.style("visibility", "visible").text(interactionType + ": " + d.mentions)})
      .on("mousemove", function(){return tooltip.style("top",
          (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");})
      .on("mouseout", function(){return tooltip.style("visibility", "hidden");});

  function nodeMouseOver(node) {
    d3.selectAll("#" + node.id + " circle")
      .classed("unselected", function(d) { return d != node;});
    d3.selectAll("#" + node.id + " .debate_link")
      .classed("unselected", function(d) {return d.source != node;});
  }

  function nodeMouseOut(node) {
    d3.selectAll("#" + node.id + " circle")
      .classed("unselected", false);
    d3.selectAll("#" + node.id + " .debate_link")
      .classed("unselected", false);
  }
  // "g" is to SVG as "div" is to HTML
  var circle = svg.append("g").selectAll("circle")
      .data(force.nodes())
    .enter().append("circle")
      .attr("r", 8)
      .call(force.drag)
      .on("mouseover", nodeMouseOver)
      .on("mouseout", nodeMouseOut);


  var text = svg.append("g").selectAll("text")
      .data(force.nodes())
    .enter().append("text")
      .attr("x", 8)
      .attr("y", ".31em")
      .text(function(d) { return d.name; });


  svg.append("text")
          .attr("x", (width / 2))
          .attr("y", 15)
          .attr("text-anchor", "middle")
          .style("font-size", "16px")
          .text(interactionType);

}



makeGraph(mod_links, mod_nodes, "debate_graph1", "Moderator Prompts");
makeGraph(challenge_links, challenge_nodes, "debate_graph2", "Real Challenges");

</script>



    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/09/17/presidential-debates/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/09/17/presidential-debates/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/09/17/presidential-debates/"
              data-via="Chris_Said"
              data-count="none"
              data-text="The debate CNN wanted and the debate the candidates wanted">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/16/new-blog-address/">
        New Blog Address
      </a>
    </h1>

    <span class="post-date">16 Sep 2015</span>

    <p>Welcome to the new location for The File Drawer! This blog is now hosted on <a href="https://pages.github.com/">Github Pages</a> and powered by <a href="https://jekyllrb.com/">Jekyll</a>. My old blog at <a href="http://filedrawer.wordpress.com">filedrawer.wordpress.com</a> will be shutting down soon.</p>

<p>I actually really liked WordPress, but I wanted to have a little bit more control over what I can put in my posts. In particular, I wanted to be able to insert my own JavaScript animations, for example in <a href="http://chris-said.io/2015/09/17/presidential-debates/">this post</a> on the recent presidential debates.</p>

<p>It was pretty fun to migrate everything over from WordPress – which is not to say there weren’t some hiccups along the way – but I was able to do so by following some nice instructions in <a href="http://joshualande.com/jekyll-github-pages-poole/">this post by Joshua Lande</a>.</p>

<p>For those of you using RSS, the feed for <a href="http://chris-said.io/">www.chris-said.io</a> should be searchable in your RSS readers, but please let me know if it’s not.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/09/16/new-blog-address/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/09/16/new-blog-address/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/09/16/new-blog-address/"
              data-via="Chris_Said"
              data-count="none"
              data-text="New Blog Address">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/08/08/10-classic-dialogues/">
        10 classic dialogues you can find on the internet
      </a>
    </h1>

    <span class="post-date">08 Aug 2015</span>

    <p>Some videos on the internet are so good that I’ve watched them twice. Below is a list of 10 of my favorite interviews and dialogues. Obviously this isn’t an endorsement of all the positions taken. I just think they are very well done and fun to watch. The last four are best watched on 1.4x speed.</p>

<ol>
  <li>
    <p><a href="http://www.dailymotion.com/video/x16z2ff_parkinson-interviews-muhammad-ali-1971-full_news">1971</a> Michael Parkinson interviews Muhammad Ali.</p>
  </li>
  <li>
    <p><a href="https://archive.org/details/MuhammadAliParkinsonInterview1974betterSound">1974</a> Michael Parkinson interviews Muhammad Ali again, with better sound.</p>
  </li>
  <li>
    <p><a href="https://www.youtube.com/watch?v=WxOp5mBY9IY">1997</a> Steve Jobs interacting with the audience when announcing the Microsoft deal.</p>
  </li>
  <li>
    <p><a href="https://www.youtube.com/watch?v=FF-tKLISfPE">1997</a> Steve Jobs interacting with the audience at WWDC.</p>
  </li>
  <li>
    <p><a href="http://thecolbertreport.cc.com/videos/6quypd/better-know-a-district---district-of-columbia---eleanor-holmes-norton">2006</a> Stephen Colbert interviews Eleanor Holmes Norton.</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2326">2009</a> Robert Wright and Joel Achenbach</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2022">2009</a> Tyler Cowen and Peter Singer</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2841">2010</a> Robert Wright and Mickey Kaus</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/3254">2011</a> Robert Wright and Mickey Kaus</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/14073">2012</a> Glenn Loury and Ann Althouse</p>
  </li>
</ol>

<p>If I had to recommend just one, it would be <a href="http://bloggingheads.tv/videos/2022">Cowen/Singer</a>.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/08/08/10-classic-dialogues/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/08/08/10-classic-dialogues/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/08/08/10-classic-dialogues/"
              data-via="Chris_Said"
              data-count="none"
              data-text="10 classic dialogues you can find on the internet">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/">
        Across industries, we’re getting better at picking metrics
      </a>
    </h1>

    <span class="post-date">31 May 2015</span>

    <p>Everywhere you look, people are optimizing bad metrics. Sometimes people optimize metrics that aren’t in their self interest, like when startups focus entirely on signup counts while forgetting about retention rates. In other cases, people optimize metrics that serve their immediate short term interest but which are bad for social welfare, like when California corrections officers <a href="http://mic.com/articles/41531/union-of-the-snake-how-california-s-prison-guards-subvert-democracy">lobby for longer prison sentences</a>.</p>

<p>The good news is that as we become a more data-driven society, there seems to be a broad trend — albeit a very slow one — towards better metrics. Take the media economy, for example. A few years ago, media companies optimized for clicks, and companies like Upworthy thrived by producing low quality content with clickbaity headlines. But now, thanks to a more sustainable <a href="https://stratechery.com/2015/buzzfeed-important-news-organization-world/">business model</a>, companies like Buzzfeed are <a href="http://www.buzzfeed.com/bensmith/why-buzzfeed-doesnt-do-clickbait">optimizing for shares rather than clicks</a>. It’s not perfect, but overall it’s better for consumers.</p>

<p>In science, researchers used to optimize for publication counts and citation counts, which biased them towards publishing surprising and interesting results that were unlikely to be true. These metrics <a href="http://www.talyarkoni.org/blog/2013/03/12/the-truth-is-not-optional-five-bad-reasons-and-one-mediocre-one-for-defending-the-status-quo/">still loom large</a>, but increasingly scientists are beginning to optimize for other metrics like <a href="https://twitter.com/lakens/status/603617310298001410">open data badges</a> and <a href="http://sometimesimwrong.typepad.com/wrong/2014/12/why-i-am-optimistic.html">reproducibility</a>, although we still have a long way to go before quality metrics are effectively <a href="http://journal.frontiersin.org/researchtopic/beyond-open-access-visions-for-open-evaluation-of-scientific-papers-by-post-publication-peer-review-137">measured</a> and <a href="/2012/04/17/its-the-incentives-structure-people-why-science-reform-must-come-from-the-granting-agencies/">incentivized</a>.</p>

<p>In health care, hospitals used to profit by maximizing the quantity of care. Perversely, hospitals benefited whenever patients were readmitted due to infections acquired in the hospital or due to lack of adequate follow-up plan. Now, with <a href="http://healthaffairs.org/blog/2014/07/24/examining-medicares-hospital-readmissions-reduction-program/">ACA</a> <a href="http://www.hhs.gov/asl/testify/2013/09/t20130924.html">policies</a> that penalize hospitals for avoidable readmissions, hospitals are taking <a href="https://innovations.ahrq.gov/profiles/statewide-all-payer-financial-incentives-significantly-reduce-hospital-acquired-conditions">real steps</a> to improve follow-up care and to reduce hospital-acquired infections. While the metrics should <a href="http://en.wikipedia.org/wiki/Value-added_modeling">be</a> <a href="https://www.aamc.org/download/382516/data/thehospitalreadmissionsprogramaccuracyandaccountabilityactbills.pdf">adjusted</a> so that they don’t unfairly penalize low income hospitals, the overall emphasis on quality rather than quantity is moving things <a href="http://www.cdc.gov/hai/progress-report/index.html">in the right direction</a>.</p>

<p>We still are light years from where we need to be, and bad incentives continue to plague everything from government to finance to education. But slowly, as we get better at measuring and storing data, I think we are getting at picking the right metrics.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/"
              data-via="Chris_Said"
              data-count="none"
              data-text="Across industries, we’re getting better at picking metrics">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/11/30/independent-t-tests-and-the-83-confidence-interval-a-useful-trick-for-eyeballing-your-data/">
        Independent t-tests and the 83% confidence interval: A useful trick for eyeballing your data.
      </a>
    </h1>

    <span class="post-date">30 Nov 2014</span>

    <p>Like most people who have analyzed data using frequentist statistics, I have often found myself staring at error bars and trying to guess whether my results are significant. When comparing two independent sample means, this practice is confusing and difficult. The conventions that we use for testing differences between sample means are not aligned with the conventions we use for plotting error bars. As a result, it’s fair to say that there’s a lot of confusion about this issue.</p>

<p>Some people believe that two independent samples have significantly different means if and only if their standard error bars (68% confidence intervals for large samples) don’t overlap. This belief is incorrect. Two samples can have nonoverlapping standard error bars and still fail to reach statistical significance at <script type="math/tex"> \alpha=.05 </script>. Other people believe that two means are significantly different if and only if their 95% confidence intervals overlap. This belief is also incorrect. For one sample t-tests, it is true that significance is reached when the 95% confidence interval crosses the test parameter <script type="math/tex"> \mu_0 </script>. But for two-sample t-tests, which are more common in research, statistical significance can occur with overlapping 95% confidence intervals.</p>

<p>If neither the 68% confidence interval nor the 95% confidence interval tells us anything about statistical significance, what does? In most situations, the answer is the 83.4% confidence interval. This can be seen in the figure below, which shows two samples with a barely significant difference in means (p=.05). Only the 83.4% confidence intervals shown in the third panel are barely overlapping, reflecting the barely significant results.</p>

<figure class="image"><img src="/assets/fig_errorbars1.png" alt="" /></figure>

<p>To understand why, let’s start by defining the t-statistic for two independent samples:</p>

<script type="math/tex; mode=display">
\begin{align}
t = \frac{\overline{X_1} - \overline{X_2}}{\sqrt{se_1^2 + se_2^2}}
\end{align}
</script>

<p>where <script type="math/tex"> \overline{X_1} </script> and <script type="math/tex"> \overline{X_2} </script> are the means of the two samples, and <script type="math/tex"> se_1 </script> and <script type="math/tex"> se_2 </script> are their standard errors. By rearranging, we can see that significant results will be barely obtained (<script type="math/tex"> p=.05 </script>) if the following condition holds:</p>

<script type="math/tex; mode=display">
\begin{align}
\overline{X_1} - \overline{X_2} = 1.96\times\sqrt{se_1^2 + se_2^2}
\end{align}
</script>

<p>where 1.96 is the large sample <script type="math/tex"> t </script> cutoff for significance. Assuming equal standard errors (more on this later), the equation simplifies to:</p>

<script type="math/tex; mode=display">
\begin{align}
\overline{X_1} - \overline{X_2} = 1.96\times{\sqrt{2}}\times{se}
\end{align}
</script>

<p>On a graph, the quantity <script type="math/tex"> \overline{X_1} - \overline{X_2} </script> is the distance between the means. If we want our error bars to just barely touch each other, we should set the length of the half-error bar to be exactly half of this, or:</p>

<script type="math/tex; mode=display">
\begin{align}
1.386\times{se}
\end{align}
</script>

<p>This corresponds to an 83.4% confidence interval on the normal distribution. While this result assumes a large sample size, it remains quite useful for sample sizes as low as 20. The 83.4% confidence interval can also become slightly less useful when the samples have strongly different standard errors, which can stem from very unequal sample sizes or variances. If you really want a solution that generalizes to this situation, you can set your half-error bar on your first sample to:</p>

<script type="math/tex; mode=display">
\begin{align}
\frac{1.96\times{\sqrt{se_1^2 + se_2^2}}\times{se_1}}{se_1^2 + se_2^2}
\end{align}
</script>

<p>and make the appropriate substitutions to compute the half-error bar in your second sample. However, this solution has the undesirable property that the error bar for one sample depends on the standard error of the other sample. For most purposes, it’s probably better to just plot the 83% confidence interval. If you are eyeballing data for a project that requires frequentist statistics, it is arguably more useful than plotting the standard error or the 95% confidence interval.</p>

<p><strong>Update</strong>: <a href="http://www.twitter.com/jeffrouder">Jeff Rouder</a> helpfully points me to <a href="http://www.researchgate.net/publication/11578767_Evaluating_statistical_difference_equivalence_and_indeterminacy_using_inferential_confidence_intervals_an_integrated_alternative_method_of_conducting_null_hypothesis_statistical_tests/file/5046351b1018420f84.pdf">Tryon and Lewis (2008)</a>, which presents an error bar that generalizes both to unequal standard errors and small samples. Like the last equation presented above, it has the undesirable property that the size of the error bar around a particular sample depends on both samples. But on the plus side, it’s guaranteed to tell you about significance.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2014/11/30/independent-t-tests-and-the-83-confidence-interval-a-useful-trick-for-eyeballing-your-data/#disqus_thread" data-disqus-identifier="356 http://filedrawer.wordpress.com/?p=356"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2014/11/30/independent-t-tests-and-the-83-confidence-interval-a-useful-trick-for-eyeballing-your-data/"
              data-via="Chris_Said"
              data-count="none"
              data-text="Independent t-tests and the 83% confidence interval: A useful trick for eyeballing your data.">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/10/16/jumping-quickly-between-deep-directories/">
        Jumping quickly between deep directories
      </a>
    </h1>

    <span class="post-date">16 Oct 2014</span>

    <p>I often need to jump between different directories with very deep paths, like this:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>some/very/deep/directory/project1
<span class="nv">$ </span><span class="c"># do stuff in Project 1</span>
<span class="nv">$ </span><span class="nb">cd </span>different/very/deep/directory/project2
<span class="nv">$ </span><span class="c"># do stuff in Project 2</span></code></pre></div>

<p>While it only takes a handful of seconds to switch directories, the extra mental effort often derails my train of thought. Some solutions exist, but they all have their limitations. For example, <code>pushd</code> and <code>popd</code> don’t work well for directories you haven’t visited in a while. Aliases require you to manually add a new alias to your .bashrc every time you want to save a new directory.</p>

<p>I recently found a solution, inspired by <a href="http://jeroenjanssens.com/2013/08/16/quickly-navigate-your-filesystem-from-the-command-line.html">this post</a> from <a href="https://twitter.com/jeroenhjanssens">Jeroen Janssens</a>, that works great and feels totally natural. All it takes is a one-time change to your .bashrc that will allow you to easily save directories and switch between them. To save a directory, just use the <code>mark</code> function:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">pwd</span>
some/very/deep/directory/project1
<span class="nv">$ </span>mark project1</code></pre></div>

<p>To navigate to a saved directory, just use the <code>cdd</code> function:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cdd project1
<span class="c"># do stuff in Project 1</span>
<span class="nv">$ </span>cdd project2
<span class="c"># do stuff in Project 2</span></code></pre></div>

<p>You can display a list of your saved directories with the <code>marks</code> function, and you can remove a directory from the list with the <code>unmark</code> function:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>unmark project1</code></pre></div>

<p>For any of this to work, you’ll need to add this to your .bashrc, assuming you have a Mac and use the bash shell.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function</span> cdd <span class="o">{</span>
        <span class="nb">cd</span> -P <span class="s2">&quot;$MARKPATH/$1&quot;</span> 2&gt;/dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;No such mark: $1&quot;</span>
    <span class="o">}</span>
    <span class="k">function</span> mark <span class="o">{</span>
        mkdir -p <span class="s2">&quot;$MARKPATH&quot;</span><span class="p">;</span> ln -s <span class="s2">&quot;$(pwd)&quot;</span> <span class="s2">&quot;$MARKPATH/$1&quot;</span>
    <span class="o">}</span>
    <span class="k">function</span> unmark <span class="o">{</span>
        rm -i <span class="s2">&quot;$MARKPATH/$1&quot;</span>
    <span class="o">}</span>
    <span class="k">function</span> marks <span class="o">{</span>
        <span class="se">\l</span>s -l <span class="s2">&quot;$MARKPATH&quot;</span> <span class="p">|</span> tail -n +2 <span class="p">|</span> sed <span class="s1">&#39;s/  / /g&#39;</span> <span class="p">|</span> cut -d<span class="s1">&#39; &#39;</span> -f9- <span class="p">|</span> awk -F <span class="s1">&#39; -&gt; &#39;</span> <span class="s1">&#39;{printf &quot;%-10s -&gt; %s\n&quot;, $1, $2}&#39;</span>
    <span class="o">}</span>

    _cdd<span class="o">()</span>
    <span class="o">{</span>
        <span class="nb">local </span><span class="nv">cur</span><span class="o">=</span><span class="k">${</span><span class="nv">COMP_WORDS</span><span class="p">[COMP_CWORD]</span><span class="k">}</span>
        <span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span><span class="nb">compgen</span> -W <span class="s2">&quot;$( ls $MARKPATH )&quot;</span> -- <span class="nv">$cur</span><span class="k">)</span> <span class="o">)</span>
    <span class="o">}</span>
    <span class="nb">complete</span> -F _cdd cdd</code></pre></div>

<p>This differs from Jeroen’s <a href="http://jeroenjanssens.com/2013/08/16/quickly-navigate-your-filesystem-from-the-command-line.html">original</a> code in a couple of ways. First, to be more brain-friendly, it names the function “cdd” instead of “jump”. Second, the tab completion works <a href="https://news.ycombinator.com/item?id=6229291">better</a>.</p>

<p>Update: <a href="https://twitter.com/johnvmcdonnell">John McDonnell</a> points me to <a href="https://github.com/joelthelion/autojump">autojump</a>.</p>



    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2014/10/16/jumping-quickly-between-deep-directories/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2014/10/16/jumping-quickly-between-deep-directories/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2014/10/16/jumping-quickly-between-deep-directories/"
              data-via="Chris_Said"
              data-count="none"
              data-text="Jumping quickly between deep directories">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/07/10/how-failed-replications-change-our-effect-size-estimates/">
        How failed replications change our effect size estimates
      </a>
    </h1>

    <span class="post-date">10 Jul 2014</span>

    <p>Yesterday I posted a very unscientific <a href="https://www.surveymonkey.com/s/H7NM96W">survey</a> asking researchers to describe how failed replications changed their subjective estimates of effect sizes. The main survey asked for “ballpark estimates” of effect sizes, but an <a href="http://csaid.shinyapps.io/survey/">alternative interactive version</a> allowed researchers to also report their uncertainty by specifying both the mean and variance of their posterior distributions. Thanks to everyone who participated. I won’t be analyzing any new data after this, but it’s never too late to publicly share your estimates!</p>

<p>Here are the questions. </p>

<p><em><strong>Question 1</strong>. A 2009 experiment with 50 subjects (25 per cell) is published in Psych Science. The experiment does not require any special equipment other than a questionnaire. It is not pre-registered. The results show an effect size of d=0.5. Let’s define the true effect size to be the average effect size of an infinite number of replications that the original experimenter would deem “reasonably exact” in advance. Based on this information alone, what is your ballpark subjective estimate of the true effect size?</em></p>

<p><em><strong>Question 2</strong>. What if the experiment had been pre-registered? </em></p>

<p><em><strong>Question 3</strong>. Assume again that the experiment was not pre-registered. Now imagine that a pre-registered replication attempt with the same sample size estimated the effect size to be d=0.0. At the time of pre-registration, the original experimenter deemed it “reasonably exact”. Based on this replication and the original experiment, what is your ballpark subjective estimate of the true effect size?</em></p>

<p><em><strong>Question 4</strong>. What if the replication attempt had 300 subjects per cell?</em></p>

<p>Here are the results.</p>

<figure class="image"><img src="/assets/results.png" alt="" /></figure>

<p>Keeping in mind all the caveats about sampling bias and other issues, here are a few observations:</p>

<ul>
  <li>
    <p>The original study reported an effect size of d=0.5, but the results for Question 1 tell us that most researchers believed the true effect size was closer to d=0.2, which is roughly in line with my own estimate. Had I allowed researchers to <a href="http://csaid.shinyapps.io/survey/">state their uncertainty</a>, I suspect that many would find it quite possible that even the <em>sign</em> of the effect was wrong. This isn’t really surprising to me, but I think we should take a moment to reflect on what this means. When a scientist reports a result, most other researchers believe it is massively overstated. I know that there are still some researchers who want little or no changes to the status quo, but I’d like to live in a world where people actually believe the claims that scientists make. That’s why I’m a strong supporter of all the attempts to <a href="http://centerforopenscience.org/">fundamentally</a> <a href="https://pubpeer.com/">change</a> <a href="http://www.talyarkoni.org/blog/2013/03/12/the-truth-is-not-optional-five-bad-reasons-and-one-mediocre-one-for-defending-the-status-quo/">how</a> scientists do research.</p>
  </li>
  <li>
    <p>If you want people to have more confidence in your findings, pre-registration can make a big difference.</p>
  </li>
  <li>
    <p>While it’s not apparent from the plot, almost all respondents reduced their effect size estimate upon hearing about failed replications (Question 3 and 4 compared to Question 1).</p>
  </li>
  <li>
    <p>As some have pointed out, the original experiment falls a bit short of statistical significance. This was an oversight, as I forgot to check the p-value after changing some of the values. I don’t think this is a huge deal, since posterior estimates shouldn’t really depend too much on whether the results cross an arbitrary threshold. But apologies for the error.</p>
  </li>
  <li>
    <p>My estimates <a href="https://twitter.com/Chris_Said/status/487041593422016512">were</a> .25, .40, .10, .05.</p>
  </li>
  <li>
    <p>I wish I included another question asking what people would have thought of the original study if it was conducted in 2014.</p>
  </li>
</ul>



    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2014/07/10/how-failed-replications-change-our-effect-size-estimates/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2014/07/10/how-failed-replications-change-our-effect-size-estimates/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2014/07/10/how-failed-replications-change-our-effect-size-estimates/"
              data-via="Chris_Said"
              data-count="none"
              data-text="How failed replications change our effect size estimates">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/07/07/jason-mitchells-essay/">
        Jason Mitchell's essay
      </a>
    </h1>

    <span class="post-date">07 Jul 2014</span>

    <p>As of yesterday I thought the debate about replication in psychology was converging on consensus in at least one respect. While there was still some disagreement about tone, <a href="http://www.spspblog.org/simone-schnall-on-her-experience-with-a-registered-replication-project/">basically</a> <a href="http://www.talyarkoni.org/blog/2013/03/12/the-truth-is-not-optional-five-bad-reasons-and-one-mediocre-one-for-defending-the-status-quo/">everyone</a> agreed that there was value in failed replications. But then this morning, Jason Mitchell posted <a href="http://wjh.harvard.edu/~jmitchel/writing/failed_science.htm">this essay</a>, in which he describes his belief that failed replication attempts can contain errors and therefore “cannot contribute to a cumulative understanding of scientific phenomena”. It’s hard to know where to begin when someone comes from a worldview so different from one’s own. Since there’s clearly a communication problem here, I’ll just give two examples to illustrate how I think about science.</p>

<ul>
  <li>
    <p><strong>Example 1</strong>. A rigorous lab conducts an experiment using a measurement device that requires special care. The effect size is d=0.5. Later, a different lab with no experience using the device tries to quickly replicate the experiment and computes an effect size of d=0.0.</p>
  </li>
  <li>
    <p><strong>Example 2</strong>. A small sample experiment in a field with a history of p-hacking shows an effect size of d=0.5. Another lab tries to replicate the study with a much larger sample and computes an effect size of d=0.0.</p>
  </li>
</ul>

<p>In both cases, I’d have subjective beliefs about the true effect size. For the first example, my posterior distribution might peak around d=0.4. For the second example, my posterior distribution might peak around d=0.1. In both cases, the replication would influence my posterior, but to varying degrees. In the first example, it would cause a small shift. In the second, it would cause a big shift. Reasonable people can disagree on the exact positions of the posteriors, but basically everyone ought to agree that our posteriors should incrementally adjust as we acquire new information, and that the size of these shifts should depend on a variety of factors, including the possibility of errors in either the original experiment or in the replication attempt. Maybe it’s because I’m stuck in a worldview, but none of this even seems very hard to understand. </p>

<p>Jason Mitchell <a href="http://wjh.harvard.edu/~jmitchel/writing/failed_science.htm">sees</a> things differently. For him, all failed replications contain “no meaningful evidentiary value” and “do not constitute scientific output”. I don’t doubt the sincerity of his beliefs, but I suspect that most scientists and nonscientists alike will find these assertions to be pretty bizarre. NHST isn’t the only thing causing the crisis in psychology, but it’s pretty clear that this is what happens when people get too immersed in it. </p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2014/07/07/jason-mitchells-essay/#disqus_thread" data-disqus-identifier="273 http://filedrawer.wordpress.com/?p=273"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2014/07/07/jason-mitchells-essay/"
              data-via="Chris_Said"
              data-count="none"
              data-text="Jason Mitchell's essay">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/05/14/how-i-use-twitter/">
        How I use Twitter
      </a>
    </h1>

    <span class="post-date">14 May 2014</span>

    <p>Next week I’m going to start a new job as a data scientist at Twitter and I am thrilled. Aside from Google search, no other website has had a more positive impact on my life than Twitter. Twitter is just so much fun, and I have learned so much from it. </p>

<p>Because my experience has been so good, it saddens me to hear that some people don’t really “get” Twitter. Some people who try it feel frustrated and stop using it. Others use it occasionally but don’t really see what all the fuss is about.</p>

<p>I want to share my approach to using Twitter so that others can try. There are probably other ways to enjoy it, but this approach has worked well for me:</p>

<ul>
  <li>
    <p>I don’t necessarily follow my friends, and I don’t expect them to follow me. I use Twitter for a limited set of interests, and not all of my friends tweet about those interests.</p>
  </li>
  <li>
    <p>I generally don’t follow organizations. They tend to tweet too much and their content is often too promotional.</p>
  </li>
  <li>
    <p>Instead, I follow opinionated people who tweet about a small set of topics that I’m interested in.</p>
  </li>
  <li>
    <p>I make sure that my tweet stream is slow enough that I can read every tweet. I do this by limiting the number of people I follow and by making sure that I don’t follow people who tweet too much, even if they have good content.</p>
  </li>
</ul>

<p>That’s it. Follow opinionated strangers who tweet about topics you are interested in. Maybe you have a different approach that works well for you. But if you are still trying to figure out the incredible appeal of Twitter, you might want to give my approach a shot.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2014/05/14/how-i-use-twitter/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2014/05/14/how-i-use-twitter/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2014/05/14/how-i-use-twitter/"
              data-via="Chris_Said"
              data-count="none"
              data-text="How I use Twitter">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'csaid81'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>


    </div>

  </body>
</html>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>


<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>
