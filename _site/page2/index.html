<!DOCTYPE html>
<html lang="en-us">

<!--
It's bad to import d3 in every post separatly (https://groups.google.com/forum/#!topic/d3-js/bwdNirt2uEU).
Importing it globally here.
Putting this up at the top, according to this controversial stack overflow answer
http://stackoverflow.com/questions/7169370/d3-js-and-document-onready
 -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<link rel="stylesheet" href="/public/font-awesome-4.4.0/css/font-awesome.min.css">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
    <meta name="description" content="My name is Chris Said and I am a data scientist at Opendoor. This blog is mostly about tech, stats, and science.">
  

  <title>
    
      The File Drawer &middot; A blog by Chris Said
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<!--   <body class="theme-base-cps">
 -->
  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          The File Drawer
        </a>
      </h1>
      <p class="lead">My name is Chris Said and I am a data scientist at Opendoor. This blog is mostly about tech, stats, and science.</p>

    </div>

    <nav class="sidebar-nav">

      
        <a class="sidebar-nav-item" href="/">Home</a>
      
        <a class="sidebar-nav-item" href="/archive">Archive</a>
      
        <a class="sidebar-nav-item" href="/atom.xml">Feed</a>
      

    </nav>

    <div class="wrapper">
      <div class="inner">
        <a href = "http://www.twitter.com/Chris_Said" class="contact-button"><i class="fa fa-twitter fa-2x"></i></a>
        <a href = "https://www.linkedin.com/pub/chris-said/6b/86b/979" class="contact-button"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href = "mailto:chris.said@gmail.com" class="contact-button"><i class="fa fa-envelope fa-2x"></i></a>
      </div>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/">
        How to make polished Jupyter presentations with optional code visibility
      </a>
    </h1>

    <span class="post-date">13 Feb 2016</span>

    <p>Jupyter notebooks are great because they allow you to easily present interactive figures. In addition, these notebooks include the figures and code in a single file, making it easy for others to reproduce your results. Sometimes though, you may want to present a cleaner report to an audience who may not care about the code. This blog post shows how to make code visibility optional, and how to remove various Jupyter elements to get a clean presentation.</p>

<p>On the top is a typical Jupyter presentation with code and some extra elements. Below that is a more polished version that removes some of the extra elements and makes code visibility optional with a button.</p>

<div class="wrapper">
    <a class="inner" href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_original.ipynb" target="_blank">
        <figure class="image"><img src="/assets/fig_unpolished_small.png" alt="" border="2px" /></figure>

    </a>
</div>
<div class="wrapper">
    <a class="inner" href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_polished.ipynb" target="_blank">
        <figure class="image"><img src="/assets/fig_polished_small.png" alt="" border="2px" /></figure>

    </a>
</div>

<p>To make the code optionally visible, available at the click of a button, include a raw cell at the beginning of your notebook containing the JavaScript and HTML below. This code sample is inspired by a <a href="http://stackoverflow.com/questions/27934885/how-to-hide-code-from-cells-in-ipython-notebook-visualized-with-nbviewer">Stack Overflow post</a>, but makes a few improvements such as using a raw cell so that the button position stays fixed, changing the button text depending on state, and displaying gradual transitions so the user understands what is happening.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
  <span class="kd">function</span> <span class="nx">code_toggle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">code_shown</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'div.input'</span><span class="p">).</span><span class="nx">hide</span><span class="p">(</span><span class="s1">'500'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#toggleButton'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">'Show Code'</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'div.input'</span><span class="p">).</span><span class="nx">show</span><span class="p">(</span><span class="s1">'500'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#toggleButton'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">'Hide Code'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">code_shown</span> <span class="o">=</span> <span class="o">!</span><span class="nx">code_shown</span>
  <span class="p">}</span>

  <span class="nx">$</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">code_shown</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'div.input'</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"javascript:code_toggle()"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">id=</span><span class="s">"toggleButton"</span> <span class="na">value=</span><span class="s">"Show Code"</span><span class="nt">&gt;&lt;/form&gt;</span></code></pre></figure>

<p>It’s pretty straightforward to remove the extra elements like the header, footer, and prompt numbers. That being said, you may want to still include some attribution to the Jupyter project and to your free hosting service. To do all of this, just include a raw cell at the end of your notebook with some more JavaScript.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'div.prompt'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'div.back-to-top'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'nav#menubar'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.breadcrumb'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.hidden-print'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;footer</span> <span class="na">id=</span><span class="s">"attribution"</span> <span class="na">style=</span><span class="s">"float:right; color:#999; background:#fff;"</span><span class="nt">&gt;</span>
Created with Jupyter, delivered by Fastly, rendered by Rackspace.
<span class="nt">&lt;/footer&gt;</span></code></pre></figure>

<p>One shortcoming with what we have so far is that users may still see some code or other unwanted elements while the page is loading. This can be especially problematic if you have a long presentation with many plots. To avoid this problem, add a raw cell at the very top of your notebook containing a preloader. This example preloader includes an animation that signals to users that the page is still loading. It heavily inspired by <a href="http://codepen.io/mimoYmima/pen/fisgL">this preloader</a> created by <a href="https://twitter.com/@mimoYmima">@mimoYmima</a>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
  <span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'#preloader'</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">remove</span><span class="p">();});</span>
  <span class="p">});</span>

  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
  <span class="nt">div</span><span class="nf">#preloader</span> <span class="p">{</span> <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
      <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
      <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
      <span class="nl">z-index</span><span class="p">:</span> <span class="m">999</span><span class="p">;</span>
      <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
      <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
      <span class="nl">overflow</span><span class="p">:</span> <span class="nb">visible</span><span class="p">;</span>
      <span class="nl">background</span><span class="p">:</span> <span class="m">#fff</span> <span class="sx">url('http://preloaders.net/preloaders/720/Moving%20line.gif')</span> <span class="nb">no-repeat</span> <span class="nb">center</span> <span class="nb">center</span><span class="p">;</span>
  <span class="p">}</span>

<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"preloader"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<meta charset="utf-8" />

<p>To work with these notebooks, you can clone my <a href="https://github.com/csaid/polished_notebooks">GitHub repository</a>. While the notebooks render correctly on nbviewer (<a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_original.ipynb">unpolished</a>, <a href="http://nbviewer.jupyter.org/github/csaid/polished_notebooks/blob/master/notebook_polished.ipynb">polished</a>), they do not render correctly on the GitHub viewer.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/"
              data-via="Chris_Said"
              data-count="none"
              data-text="How to make polished Jupyter presentations with optional code visibility">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/17/presidential-debates/">
        The debate CNN wanted and the debate the candidates wanted
      </a>
    </h1>

    <span class="post-date">17 Sep 2015</span>

    <p>In last night’s Republican presidential debate, the CNN moderators tried very hard to pit individual candidates against each other. Pretty much every question was along the lines of: “Candidate A, what do you think about Candidate B’s attacks on you?”</p>

<p>While CNN wanted to generate controversy, the disputes it tried to initiate were not necessarily the disputes that the candidates strategically wanted to have. To get a better sense for this, I tallied up two things:</p>

<ol>
  <li><strong>Moderator Prompts</strong>. These were episodes where the moderators prompted one candidate to challenge another.</li>
  <li><strong>Real Challenges</strong>. These were episodes where either (a) the candidate took the bait from a Moderator Prompt and attacked the other candidate or (b) a candidate launched an unprompted attack on another candidate. I did not include episodes where a prompted candidate acknowledged a disagreement with another candidate in a nonconfrontational way.</li>
</ol>

<p>The results are below. In the first graph, an arrow from one candidate to another indicates that the moderator asked the first candidate to challenge the second. The next graph shows real challenges. In both graphs, the boldness of the curve indicates how many times the event occurred.</p>

<meta charset="utf-8" />

<div class="center">
  <span id="debate_graph1"></span>
  <span id="debate_graph2"></span>
</div>

<p>Some observations:</p>

<ul>
  <li>The graph of Moderator Prompts is much denser than the graph of Real Challenges. As was clear to anyone watching the debate, the moderators wanted to generate more controversy than the candidates wanted.</li>
  <li>Most of the real action in the second graph was in the Trump-Bush-Paul Triangle of Controversy.</li>
  <li>The moderators tried to prompt several challenges to Ben Carson but nobody took the bait. Conversely, the moderators paid relatively little attention to Rand Paul, and yet he was part of several real disputes.</li>
  <li>The interests of Donald Trump were pretty well aligned with the interests of CNN. Donald Trump was prompted many times and engaged in many challenges.</li>
</ul>

<p>It’s also interesting to look at how many times each of the candidates challenged Hillary Clinton, who was not on the stage. Jeb Bush mentioned her on five separate occassions, whereas Donald Trump never mentioned her at all. It’s just a few data points, but it’s consistent with Jeb’s larger focus on the general election.</p>

<figure class="image"><img src="/assets/hillary.png" alt="" /></figure>

<p>I doubt any of this data is very predicitive of election outcomes, but it definitely seems to be related to current polling trends. Either way, it’s pretty interesting to look at. I might make these plots for some of the other debates to see how these relationships change over time.</p>

<p><strong>Update:</strong> Coincidentally, the New York Times just released a <a href="http://www.nytimes.com/interactive/2015/09/17/us/politics/gop-debate-trump-attacks-speaking-time.html">similar analysis with similar graphics</a>. Also, special thanks to <a href="http://www.twitter.com/trebor">@trebor</a> for helping me set up mouseover-triggered transparency.</p>

<style>

.debate_link {
  fill: none;
  stroke: #3AC3F2;
}

.debate_tooltip {
    border-radius: 5px;
    background: #ccc;
    border-color: #555;
    padding: 5px;
    font-size: 10px;
    /*width: 200px;*/
    /*height: 150px;*/
}

.debate_link.resolved {
  stroke-dasharray: 0,2 1;
}

circle {
  fill: #ED2685;
  stroke: #fff;
  stroke-width: 1.5px;
}

path.unselected {
  opacity: 0.1;
}

circle.unselected {
  fill: #ED86C5;
}


text {
  font: 10px sans-serif;
}

</style>

<script>

var mod_links = [
   {source: 0, target: 1, mentions: 3},
   {source: 0, target: 2, mentions: 1},
   {source: 0, target: 3, mentions: 1},
   {source: 0, target: 5, mentions: 1},
   {source: 0, target: 7, mentions: 1},
   {source: 1, target: 0, mentions: 3},
   {source: 1, target: 6, mentions: 2},
   {source: 1, target: 8, mentions: 2},
   {source: 1, target: 10, mentions: 2},
   {source: 2, target: 4, mentions: 1},
   {source: 2, target: 10, mentions: 1},
   {source: 3, target: 0, mentions: 2},
   {source: 3, target: 1, mentions: 1},
   {source: 4, target: 1, mentions: 3},
   {source: 4, target: 2, mentions: 1},
   {source: 4, target: 5, mentions: 1},
   {source: 5, target: 0, mentions: 1},
   {source: 5, target: 4, mentions: 1},
   {source: 5, target: 9, mentions: 1},
   {source: 6, target: 1, mentions: 1},
   {source: 7, target: 2, mentions: 1},
   {source: 8, target: 1, mentions: 1},
   {source: 8, target: 4, mentions: 2},
   {source: 8, target: 6, mentions: 1},
   {source: 9, target: 1, mentions: 1},
   {source: 9, target: 5, mentions: 3},
   {source: 9, target: 10, mentions: 1},
   {source: 10,target: 1, mentions: 4},
];

var mod_nodes = [
{idx: 0, name: 'Bush', fixed: true, x: 235.0, y: 135.0},
{idx: 1, name: 'Trump', fixed: true, x: 219.125353283, y: 189.064081746},
{idx: 2, name: 'Walker', fixed: true, x: 176.5415013, y: 225.963199535},
{idx: 3, name: 'Huckabee', fixed: true, x: 120.768516173, y: 233.982144188},
{idx: 4, name: 'Carson', fixed: true, x: 69.5139266055, y: 210.574957435},
{idx: 5, name: 'Cruz', fixed: true, x: 39.0507026386, y: 163.173255684},
{idx: 6, name: 'Rubio', fixed: true, x: 39.0507026386, y: 106.826744316},
{idx: 7, name: 'Paul', fixed: true, x: 69.5139266055, y: 59.4250425646},
{idx: 8, name: 'Christie', fixed: true, x: 120.768516173, y: 36.0178558119},
{idx: 9, name: 'Kasich', fixed: true, x: 176.5415013, y: 44.0368004645},
{idx: 10, name: 'Fiorina', fixed: true, x: 219.125353283, y: 80.9359182544},
]



var challenge_links = [
   {source: 0, target: 1, mentions: 4},
   {source: 0, target: 5, mentions: 1},
   {source: 1, target: 0, mentions: 4},
   {source: 1, target: 2, mentions: 1},
   {source: 1, target: 6, mentions: 1},
   {source: 1, target: 7, mentions: 3},
   {source: 1, target: 10, mentions: 1},
   {source: 2, target: 1, mentions: 1},
   {source: 7, target: 0, mentions: 3},
   {source: 7, target: 1, mentions: 1},
   {source: 7, target: 8, mentions: 1},
   {source: 8, target: 7, mentions: 1},
   {source: 8, target: 10, mentions: 1},
   {source: 10,target: 1, mentions: 2},
   {source: 10,target: 8, mentions: 1},
];





var challenge_nodes = [
{idx: 0, name: 'Bush', fixed: true, x: 235.0, y: 135.0},
{idx: 1, name: 'Trump', fixed: true, x: 219.125353283, y: 189.064081746},
{idx: 2, name: 'Walker', fixed: true, x: 176.5415013, y: 225.963199535},
{idx: 3, name: 'Huckabee', fixed: true, x: 120.768516173, y: 233.982144188},
{idx: 4, name: 'Carson', fixed: true, x: 69.5139266055, y: 210.574957435},
{idx: 5, name: 'Cruz', fixed: true, x: 39.0507026386, y: 163.173255684},
{idx: 6, name: 'Rubio', fixed: true, x: 39.0507026386, y: 106.826744316},
{idx: 7, name: 'Paul', fixed: true, x: 69.5139266055, y: 59.4250425646},
{idx: 8, name: 'Christie', fixed: true, x: 120.768516173, y: 36.0178558119},
{idx: 9, name: 'Kasich', fixed: true, x: 176.5415013, y: 44.0368004645},
{idx: 10, name: 'Fiorina', fixed: true, x: 219.125353283, y: 80.9359182544},
]



function makeGraph(links, nodes, id, interactionType) {

  // Use elliptical arc path segments to doubly-encode directionality.
  function tick() {
    path.attr("d", linkArc);
    circle.attr("transform", transform);
    text.attr("transform", transform);
  }

  function linkArc(d) {
    var dx = d.target.x - d.source.x,
        dy = d.target.y - d.source.y,
        dr = Math.sqrt(dx * dx + dy * dy);
    return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
  }

  function transform(d) {
    return "translate(" + d.x + "," + d.y + ")";
  }

  // Mark each node with chart id
  nodes.forEach(function(d) {d.id=id});

  // Compute the distinct nodes from the links.
  links.forEach(function(link) {
    link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
    link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
  });

  var width = 270,
      height = 280;

  var force = d3.layout.force()
      .nodes(d3.values(nodes))
      .links(links)
      .size([width, height])
      .on("tick", tick)
      .start();

  var svg = d3.select("span#" + id).append("svg")
      .attr("width", width)
      .attr("height", height);
      // .attr("class", "center");

  // Per-type markers, as they don't inherit styles.
  svg.append("defs")
      .append("marker")
      .attr("id", "marker")
      .attr("viewBox", "0 -5 10 10") // min-x, min-y, width, height
      .attr("refX", 17) // The reference point. Even though arrow is length 10, using 12 because otherwise would go to center of circle.
      .attr("refY", 0)
      .attr("markerWidth", 10)
      .attr("markerHeight", 10)
      .attr("markerUnits", "userSpaceOnUse") // makes marker size independent of stroke-width
      .attr("orient", "auto")
      .attr("fill", "#3AC3F2")
    .append("path")
      .attr("d", "M0,-5L10,0L0,5"); // Arrow definition. Start at 0,-5. Then draw line to 10, 0. Then draw line to 0, 5

  // http://stackoverflow.com/questions/10805184/d3-show-data-on-mouseover-of-circle
  // http://bl.ocks.org/biovisualize/1016860
  var tooltip = d3.select("span#" + id)
      .append("div")
      .attr("class", "debate_tooltip")
      .style("position", "absolute")
      .style("z-index", "10")
      .style("visibility", "hidden")
  ;


  var path = svg.append("g").selectAll("path")
      .data(force.links())
    .enter().append("path")
      .attr("class", "debate_link")
      .attr("stroke-width", function(d) { return d.mentions })
      .attr("marker-end", "url(#marker)") // This just say that the arrow should go at the end of the link, rather than the beginning.
      .on("mouseover", function(d){return tooltip.style("visibility", "visible").text(interactionType + ": " + d.mentions)})
      .on("mousemove", function(){return tooltip.style("top",
          (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");})
      .on("mouseout", function(){return tooltip.style("visibility", "hidden");});

  function nodeMouseOver(node) {
    d3.selectAll("#" + node.id + " circle")
      .classed("unselected", function(d) { return d != node;});
    d3.selectAll("#" + node.id + " .debate_link")
      .classed("unselected", function(d) {return d.source != node;});
  }

  function nodeMouseOut(node) {
    d3.selectAll("#" + node.id + " circle")
      .classed("unselected", false);
    d3.selectAll("#" + node.id + " .debate_link")
      .classed("unselected", false);
  }
  // "g" is to SVG as "div" is to HTML
  var circle = svg.append("g").selectAll("circle")
      .data(force.nodes())
    .enter().append("circle")
      .attr("r", 8)
      .on("mouseover", nodeMouseOver)
      .on("mouseout", nodeMouseOut);


  var text = svg.append("g").selectAll("text")
      .data(force.nodes())
    .enter().append("text")
      .attr("x", 8)
      .attr("y", ".31em")
      .text(function(d) { return d.name; });


  svg.append("text")
          .attr("x", (width / 2))
          .attr("y", 15)
          .attr("text-anchor", "middle")
          .style("font-size", "16px")
          .text(interactionType);

}



makeGraph(mod_links, mod_nodes, "debate_graph1", "Moderator Prompts");
makeGraph(challenge_links, challenge_nodes, "debate_graph2", "Real Challenges");

</script>



    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/09/17/presidential-debates/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/09/17/presidential-debates/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/09/17/presidential-debates/"
              data-via="Chris_Said"
              data-count="none"
              data-text="The debate CNN wanted and the debate the candidates wanted">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/16/new-blog-address/">
        New Blog Address
      </a>
    </h1>

    <span class="post-date">16 Sep 2015</span>

    <p>Welcome to the new location for The File Drawer! This blog is now hosted on <a href="https://pages.github.com/">Github Pages</a> and powered by <a href="https://jekyllrb.com/">Jekyll</a>. My old blog at <a href="http://filedrawer.wordpress.com">filedrawer.wordpress.com</a> will be shutting down soon.</p>

<p>I actually really liked WordPress, but I wanted to have a little bit more control over what I can put in my posts. In particular, I wanted to be able to insert my own JavaScript animations, for example in <a href="http://chris-said.io/2015/09/17/presidential-debates/">this post</a> on the recent presidential debates.</p>

<p>It was pretty fun to migrate everything over from WordPress – which is not to say there weren’t some hiccups along the way – but I was able to do so by following some nice instructions in <a href="http://joshualande.com/jekyll-github-pages-poole/">this post by Joshua Lande</a>.</p>

<p>For those of you using RSS, the feed for <a href="http://chris-said.io/">www.chris-said.io</a> should be searchable in your RSS readers, but please let me know if it’s not.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/09/16/new-blog-address/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/09/16/new-blog-address/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/09/16/new-blog-address/"
              data-via="Chris_Said"
              data-count="none"
              data-text="New Blog Address">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/08/08/10-classic-dialogues/">
        10 classic dialogues you can find on the internet
      </a>
    </h1>

    <span class="post-date">08 Aug 2015</span>

    <p>Some videos on the internet are so good that I’ve watched them twice. Below is a list of 10 of my favorite interviews and dialogues. Obviously this isn’t an endorsement of all the positions taken. I just think they are very well done and fun to watch. The last four are best watched on 1.4x speed.</p>

<ol>
  <li>
    <p><a href="http://www.dailymotion.com/video/x16z2ff_parkinson-interviews-muhammad-ali-1971-full_news">1971</a> Michael Parkinson interviews Muhammad Ali.</p>
  </li>
  <li>
    <p><a href="https://archive.org/details/MuhammadAliParkinsonInterview1974betterSound">1974</a> Michael Parkinson interviews Muhammad Ali again, with better sound.</p>
  </li>
  <li>
    <p><a href="https://www.youtube.com/watch?v=WxOp5mBY9IY">1997</a> Steve Jobs interacting with the audience when announcing the Microsoft deal.</p>
  </li>
  <li>
    <p><a href="https://www.youtube.com/watch?v=FF-tKLISfPE">1997</a> Steve Jobs interacting with the audience at WWDC.</p>
  </li>
  <li>
    <p><a href="http://thecolbertreport.cc.com/videos/6quypd/better-know-a-district---district-of-columbia---eleanor-holmes-norton">2006</a> Stephen Colbert interviews Eleanor Holmes Norton.</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2326">2009</a> Robert Wright and Joel Achenbach</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2022">2009</a> Tyler Cowen and Peter Singer</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/2841">2010</a> Robert Wright and Mickey Kaus</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/3254">2011</a> Robert Wright and Mickey Kaus</p>
  </li>
  <li>
    <p><a href="http://bloggingheads.tv/videos/14073">2012</a> Glenn Loury and Ann Althouse</p>
  </li>
</ol>

<p>If I had to recommend just one, it would be <a href="http://bloggingheads.tv/videos/2022">Cowen/Singer</a>.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/08/08/10-classic-dialogues/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/08/08/10-classic-dialogues/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/08/08/10-classic-dialogues/"
              data-via="Chris_Said"
              data-count="none"
              data-text="10 classic dialogues you can find on the internet">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/">
        Across industries, we’re getting better at picking metrics
      </a>
    </h1>

    <span class="post-date">31 May 2015</span>

    <p>Everywhere you look, people are optimizing bad metrics. Sometimes people optimize metrics that aren’t in their self interest, like when startups focus entirely on signup counts while forgetting about retention rates. In other cases, people optimize metrics that serve their immediate short term interest but which are bad for social welfare, like when California corrections officers <a href="http://mic.com/articles/41531/union-of-the-snake-how-california-s-prison-guards-subvert-democracy">lobby for longer prison sentences</a>.</p>

<p>The good news is that as we become a more data-driven society, there seems to be a broad trend — albeit a very slow one — towards better metrics. Take the media economy, for example. A few years ago, media companies optimized for clicks, and companies like Upworthy thrived by producing low quality content with clickbaity headlines. But now, thanks to a more sustainable <a href="https://stratechery.com/2015/buzzfeed-important-news-organization-world/">business model</a>, companies like Buzzfeed are <a href="http://www.buzzfeed.com/bensmith/why-buzzfeed-doesnt-do-clickbait">optimizing for shares rather than clicks</a>. It’s not perfect, but overall it’s better for consumers.</p>

<p>In science, researchers used to optimize for publication counts and citation counts, which biased them towards publishing surprising and interesting results that were unlikely to be true. These metrics <a href="http://www.talyarkoni.org/blog/2013/03/12/the-truth-is-not-optional-five-bad-reasons-and-one-mediocre-one-for-defending-the-status-quo/">still loom large</a>, but increasingly scientists are beginning to optimize for other metrics like <a href="https://twitter.com/lakens/status/603617310298001410">open data badges</a> and <a href="http://sometimesimwrong.typepad.com/wrong/2014/12/why-i-am-optimistic.html">reproducibility</a>, although we still have a long way to go before quality metrics are effectively <a href="http://journal.frontiersin.org/researchtopic/beyond-open-access-visions-for-open-evaluation-of-scientific-papers-by-post-publication-peer-review-137">measured</a> and <a href="/2012/04/17/its-the-incentives-structure-people-why-science-reform-must-come-from-the-granting-agencies/">incentivized</a>.</p>

<p>In health care, hospitals used to profit by maximizing the quantity of care. Perversely, hospitals benefited whenever patients were readmitted due to infections acquired in the hospital or due to lack of adequate follow-up plan. Now, with <a href="http://healthaffairs.org/blog/2014/07/24/examining-medicares-hospital-readmissions-reduction-program/">ACA</a> <a href="http://www.hhs.gov/asl/testify/2013/09/t20130924.html">policies</a> that penalize hospitals for avoidable readmissions, hospitals are taking <a href="https://innovations.ahrq.gov/profiles/statewide-all-payer-financial-incentives-significantly-reduce-hospital-acquired-conditions">real steps</a> to improve follow-up care and to reduce hospital-acquired infections. While the metrics should <a href="http://en.wikipedia.org/wiki/Value-added_modeling">be</a> <a href="https://www.aamc.org/download/382516/data/thehospitalreadmissionsprogramaccuracyandaccountabilityactbills.pdf">adjusted</a> so that they don’t unfairly penalize low income hospitals, the overall emphasis on quality rather than quantity is moving things <a href="http://www.cdc.gov/hai/progress-report/index.html">in the right direction</a>.</p>

<p>We still are light years from where we need to be, and bad incentives continue to plague everything from government to finance to education. But slowly, as we get better at measuring and storing data, I think we are getting at picking the right metrics.</p>


    <div>
        <i class="fa fa-comment"></i> <a href="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/#disqus_thread" data-disqus-identifier="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/"></a>
        <span>&nbsp; &nbsp;</span>
        <span>
            <a class="twitter-share-button"
              href="https://twitter.com/share"
              data-url="http://www.chris-said.io/2015/05/31/were-getting-better-at-picking-metrics-to-optimize/"
              data-via="Chris_Said"
              data-count="none"
              data-text="Across industries, we’re getting better at picking metrics">
            Tweet
            </a>
        </span>

    </div>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'csaid81'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>


    </div>

  </body>
</html>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">


MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>


<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>
